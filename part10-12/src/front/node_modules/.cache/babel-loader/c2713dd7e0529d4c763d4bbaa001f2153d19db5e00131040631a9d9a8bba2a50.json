{"ast":null,"code":"import axios from \"axios\";\nimport Utils from \"../utils/Utils\";\nimport { alertActions, store } from \"../utils/Rdx\";\nconst API_URL = \"http://localhost:8081/api/v1\";\nconst AUTH_URL = \"http://localhost:8081/auth\";\nclass BackendService {\n  login(login, password) {\n    return axios.post(`${AUTH_URL}/login`, {\n      login,\n      password\n    });\n  }\n  logout() {\n    return axios.get(`${AUTH_URL}/logout`, {\n      headers: {\n        Authorization: Utils.getToken()\n      }\n    });\n  }\n\n  /* Countries */\n\n  retrieveAllCountries(page, limit) {\n    return axios.get(`${API_URL}/countries`);\n  }\n  retrieveCountry(id) {\n    return axios.get(`${API_URL}/countries/${id}`);\n  }\n  createCountry(country) {\n    return axios.post(`${API_URL}/countries`, country);\n  }\n  updateCountry(country) {\n    return axios.put(`${API_URL}/countries/${country.id}`, country);\n  }\n  deleteCountries(countries) {\n    return axios.post(`${API_URL}/deletecountries`, countries);\n  }\n}\nfunction showError(msg) {\n  store.dispatch(alertActions.error(msg));\n}\naxios.interceptors.request.use(config => {\n  store.dispatch(alertActions.clear());\n  let token = Utils.getToken();\n  if (token) config.headers.Authorization = token;\n  return config;\n}, error => {\n  showError(error.message);\n  return Promise.reject(error);\n});\naxios.interceptors.response.use(undefined, error => {\n  if (error.response && error.response.status && [401, 403].indexOf(error.response.status) !== -1) showError(\"Ошибка авторизации ??\");else if (error.response && error.response.data && error.response.data.message) showError(error.response.data.message);else showError(error.message);\n  return Promise.reject(error);\n});\nexport default new BackendService();","map":{"version":3,"names":["axios","Utils","alertActions","store","API_URL","AUTH_URL","BackendService","login","password","post","logout","get","headers","Authorization","getToken","retrieveAllCountries","page","limit","retrieveCountry","id","createCountry","country","updateCountry","put","deleteCountries","countries","showError","msg","dispatch","error","interceptors","request","use","config","clear","token","message","Promise","reject","response","undefined","status","indexOf","data"],"sources":["/home/dungodan/AndroidStudioProjects/PART_8/backend/src/front/src/services/BackendService.jsx"],"sourcesContent":["import axios from \"axios\";\nimport Utils from \"../utils/Utils\";\nimport { alertActions, store } from \"../utils/Rdx\";\n\nconst API_URL = \"http://localhost:8081/api/v1\";\nconst AUTH_URL = \"http://localhost:8081/auth\";\n\nclass BackendService {\n  login(login, password) {\n    return axios.post(`${AUTH_URL}/login`, { login, password });\n  }\n\n  logout() {\n    return axios.get(`${AUTH_URL}/logout`, {\n      headers: { Authorization: Utils.getToken() },\n    });\n  }\n\n  /* Countries */\n\n  retrieveAllCountries(page, limit) {\n    return axios.get(`${API_URL}/countries`);\n  }\n\n  retrieveCountry(id) {\n    return axios.get(`${API_URL}/countries/${id}`);\n  }\n\n  createCountry(country) {\n    return axios.post(`${API_URL}/countries`, country);\n  }\n\n  updateCountry(country) {\n    return axios.put(`${API_URL}/countries/${country.id}`, country);\n  }\n\n  deleteCountries(countries) {\n    return axios.post(`${API_URL}/deletecountries`, countries);\n  }\n}\n\nfunction showError(msg) {\n  store.dispatch(alertActions.error(msg));\n}\n\naxios.interceptors.request.use(\n  (config) => {\n    store.dispatch(alertActions.clear());\n    let token = Utils.getToken();\n    if (token) config.headers.Authorization = token;\n    return config;\n  },\n  (error) => {\n    showError(error.message);\n    return Promise.reject(error);\n  }\n);\n\naxios.interceptors.response.use(undefined, (error) => {\n  if (\n    error.response &&\n    error.response.status &&\n    [401, 403].indexOf(error.response.status) !== -1\n  )\n    showError(\"Ошибка авторизации ??\");\n  else if (error.response && error.response.data && error.response.data.message)\n    showError(error.response.data.message);\n  else showError(error.message);\n  return Promise.reject(error);\n});\n\nexport default new BackendService();\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}